/*
 * jquery-filestyle
 * http://dev.tudosobreweb.com.br/jquery-filestyle/
 *
 * Copyright (c) 2013 Markus Vinicius da Silva Lima
 * Version 0.1.3
 * Licensed under the MIT license.
 */
(function(e){"use strict";var t=function(t,n){this.options=n;this.$elementjFilestyle=[];this.$element=e(t)};t.prototype={clear:function(){this.$element.val("");this.$elementjFilestyle.find(":text").val("")},destroy:function(){this.$element.removeAttr("style").removeData("jfilestyle").val("");this.$elementjFilestyle.remove()},icon:function(e){if(e===true){if(!this.options.icon){this.options.icon=true;this.$elementjFilestyle.find("label").prepend(this.htmlIcon())}}else if(e===false){if(this.options.icon){this.options.icon=false;this.$elementjFilestyle.find("i").remove()}}else{return this.options.icon}},input:function(e){if(e===true){if(!this.options.input){this.options.input=true;this.$elementjFilestyle.prepend(this.htmlInput());var t="",n=[];if(this.$element[0].files===undefined){n[0]={name:this.$element[0].value}}else{n=this.$element[0].files}for(var r=0;r<n.length;r++){t+=n[r].name.split("\\").pop()+", "}if(t!==""){this.$elementjFilestyle.find(":text").val(t.replace(/\, $/g,""))}}}else if(e===false){if(this.options.input){this.options.input=false;this.$elementjFilestyle.find(":text").remove()}}else{return this.options.input}},buttonText:function(e){if(e!==undefined){this.options.buttonText=e;this.$elementjFilestyle.find("label span").html(this.options.buttonText)}else{return this.options.buttonText}},iconName:function(e){if(e!==undefined){this.options.iconName=e;if(this.options.theme.search(/blue|green|red|orange|black/i)!==-1){this.$elementjFilestyle.find("label").find("i").attr({"class":"icon-white "+this.options.iconName})}else{this.$elementjFilestyle.find("label").find("i").attr({"class":this.options.iconName})}}else{return this.options.iconName}},size:function(e){if(e!==undefined){this.options.size=e;this.$elementjFilestyle.find(":text").css("width",this.options.size)}else{return this.options.size}},htmlIcon:function(){if(this.options.icon){var e="";if(this.options.theme.search(/blue|green|red|orange|black/i)!==-1){e=" icon-white "}return'<i class="'+e+this.options.iconName+'"></i> '}else{return""}},htmlInput:function(){if(this.options.input){return'<input type="text" placeholder="'+this.options.placeholder+'" style="width:'+this.options.size+'" disabled> '}else{return""}},constructor:function(){var t=this,n="",r=this.$element.attr("id"),i=[];if(r===""||!r){r="jfilestyle-"+e(".jquery-filestyle").length;this.$element.attr({id:r})}n=this.htmlInput()+'<label for="'+r+'">'+this.htmlIcon()+"<span>"+this.options.buttonText+"</span>"+"</label>";this.$elementjFilestyle=e('<div class="jquery-filestyle '+this.options.theme+'" style="display: inline;">'+n+"</div>");this.$element.css({position:"absolute",left:"-500px"}).after(this.$elementjFilestyle);this.$element.change(function(){var e="";if(this.files===undefined){i[0]={name:this.value}}else{i=this.files}for(var n=0;n<i.length;n++){e+=i[n].name.split("\\").pop()+", "}if(e!==""){t.$elementjFilestyle.find(":text").val(e.replace(/\, $/g,""))}});if(window.navigator.userAgent.search(/firefox/i)>-1){this.$elementjFilestyle.find("label").click(function(){t.$element.click();return false})}}};var n=e.fn.jfilestyle;e.fn.jfilestyle=function(n,r){var i="",s=this.each(function(){if(e(this).attr("type")==="file"){var s=e(this),o=s.data("jfilestyle"),u=e.extend({},e.fn.jfilestyle.defaults,n,typeof n==="object"&&n);if(!o){s.data("jfilestyle",o=new t(this,u));o.constructor()}if(typeof n==="string"){i=o[n](r)}}});if(typeof i!==undefined){return i}else{return s}};e.fn.jfilestyle.defaults={buttonText:"Choose file",input:true,icon:true,size:"200px",iconName:"icon-folder-open",placeholder:"",theme:""};e.fn.jfilestyle.noConflict=function(){e.fn.jfilestyle=n;return this};e(".jfilestyle").each(function(){var t=e(this),n={buttonText:t.attr("data-buttonText"),input:t.attr("data-input")==="false"?false:true,icon:t.attr("data-icon")==="false"?false:true,size:t.attr("data-size"),iconName:t.attr("data-iconName"),placeholder:t.attr("data-placeholder"),theme:t.attr("data-theme")};t.jfilestyle(n)})})(window.jQuery)
